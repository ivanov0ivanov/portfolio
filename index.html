<!DOCTYPE html>
<html lang="uk">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Портфоліо Front-End розробника</title>
	<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
	<style>
		body {
			background-color: #000;
			color: #fff;
			font-family: 'Press Start 2P', cursive;
			margin: 0;
			padding: 0;
			text-align: center;
		}

		header {
			background-color: #333;
			padding: 20px;
			animation: fadeIn 2s ease-in-out;
		}

		h1 {
			color: #0f0;
		}

		nav a {
			color: #0f0;
			text-decoration: none;
			margin: 0 15px;
			transition: color 0.3s;
		}

		nav a:hover {
			color: #ff0;
		}

		section {
			padding: 20px;
			animation: fadeIn 2s ease-in-out;
		}

		.pixel-border {
			border: 4px solid #fff;
			padding: 10px;
			display: inline-block;
			margin: 10px 0;
		}

		.portfolio-item {
			margin: 20px 0;
			animation: fadeIn 2s ease-in-out;
		}

		.contact-form input, .contact-form textarea {
			width: 100%;
			padding: 10px;
			margin: 10px 0;
			border: 2px solid #fff;
			background-color: #000;
			color: #fff;
			font-family: 'Press Start 2P', cursive;
		}

		.contact-form button {
			padding: 10px 20px;
			background-color: #0f0;
			border: none;
			font-family: 'Press Start 2P', cursive;
			cursor: pointer;
			transition: background-color 0.3s;
		}

		.contact-form button:hover {
			background-color: #ff0;
		}

		footer {
			background-color: #333;
			padding: 10px;
			animation: fadeIn 2s ease-in-out;
		}

		.social-links a {
			color: #0f0;
			margin: 0 10px;
			transition: color 0.3s;
		}

		.social-links a:hover {
			color: #ff0;
		}

		@keyframes fadeIn {
			from {
				opacity: 0;
			}
			to {
				opacity: 1;
			}
		}

		.game-area {
			display: none;
			margin: 20px 0;
		}

		.game-canvas {
			background-color: #000;
			border: 4px solid #fff;
		}
	</style>
</head>
<body>
<header>
	<h1>Портфоліо Front-End розробника</h1>
	<nav>
		<a href="#about">Про мене</a>
		<a href="#portfolio">Портфоліо</a>
		<a href="#contact">Контакти</a>
	</nav>
</header>
<section id="about">
	<h2>Про мене</h2>
	<div class="pixel-border">
		<p>Я Front-End розробник з великим досвідом роботи. Моя спеціалізація - створення сучасних та інтерактивних
			вебдодатків.</p>
	</div>
	<button id="start-game-button"
	        style="padding: 10px 20px; margin-top: 20px; background-color: #0f0; border: none; cursor: pointer;">Почати
		міні-гру
	</button>
	<button id="end-game-button"
	        style="padding: 10px 20px; margin-top: 20px; background-color: #f00; border: none; cursor: pointer; display: none;">
		Завершити гру
	</button>
	<div class="game-area">
		<canvas id="game-canvas" width="400" height="400" class="game-canvas"></canvas>
	</div>
</section>
<section id="portfolio">
	<h2>Портфоліо</h2>
	<div class="portfolio-item pixel-border">
		<h3>Проєкт 1</h3>
		<p>Опис проєкту 1...</p>
	</div>
	<div class="portfolio-item pixel-border">
		<h3>Проєкт 2</h3>
		<p>Опис проєкту 2...</p>
	</div>
</section>
<section id="contact">
	<h2>Контакти</h2>
	<div class="pixel-border contact-form">
		<form>
			<input type="text" name="name" placeholder="Ваше ім'я">
			<input type="email" name="email" placeholder="Ваш Email">
			<textarea name="message" rows="5" placeholder="Ваше повідомлення"></textarea>
			<button type="submit">Надіслати</button>
		</form>
	</div>
	<div class="social-links">
		<a href="https://twitter.com" target="_blank">Twitter</a>
		<a href="https://linkedin.com" target="_blank">LinkedIn</a>
		<a href="https://github.com" target="_blank">GitHub</a>
	</div>
</section>
<footer>
	<p>&copy; 2024 Портфоліо Front-End розробника. Всі права захищені.</p>
</footer>
<script>
	const startGameButton = document.getElementById("start-game-button");
	const endGameButton = document.getElementById("end-game-button");
	const gameArea = document.querySelector(".game-area");
	const gameCanvas = document.getElementById("game-canvas");
	const ctx = gameCanvas.getContext("2d");
	let playerX = 200, playerY = 200;
	const playerSize = 20;
	let playerColor = "#0f0";
	const keys = {};
	const items = [];
	const monsters = [];
	let gameActive = false;
	let playerMoved = false;
	let victory = false;

	// Створення модального вікна
	const modal = document.createElement("div");
	modal.style.position = "fixed";
	modal.style.top = "50%";
	modal.style.left = "50%";
	modal.style.transform = "translate(-50%, -50%)";
	modal.style.backgroundColor = "#333";
	modal.style.padding = "20px";
	modal.style.border = "4px solid #fff";
	modal.style.display = "none";
	modal.style.zIndex = "1000";
	modal.style.textAlign = "center";
	modal.innerHTML = `
        <h2 id="modal-message" style="color: #0f0;"></h2>
        <button id="modal-restart-button" style="padding: 10px 20px; margin: 10px; background-color: #0f0; border: none; cursor: pointer;">Почати знову</button>
        <button id="modal-exit-button" style="padding: 10px 20px; margin: 10px; background-color: #f00; border: none; cursor: pointer;">Вийти</button>
    `;
	document.body.appendChild(modal);

	const modalMessage = document.getElementById("modal-message");
	const modalRestartButton = document.getElementById("modal-restart-button");
	const modalExitButton = document.getElementById("modal-exit-button");

	startGameButton.addEventListener("click", () => {
		gameArea.style.display = "block";
		startGameButton.style.display = "none";
		endGameButton.style.display = "inline-block";
		startGame();
		gameLoop();
		disableScroll();
	});

	endGameButton.addEventListener("click", () => {
		gameArea.style.display = "none";
		startGameButton.style.display = "inline-block";
		endGameButton.style.display = "none";
		enableScroll();
		clearKeys();  // Очищаємо стан клавіш при завершенні гри
		gameActive = false;  // Завершення гри
	});

	modalRestartButton.addEventListener("click", restartGame);
	modalExitButton.addEventListener("click", exitGame);

	document.addEventListener("keydown", (e) => {
		keys[e.key] = true;
		playerMoved = true;
	});

	document.addEventListener("keyup", (e) => {
		keys[e.key] = false;
	});

	function startGame () {
		clearKeys();  // Очищаємо стан клавіш при перезапуску гри

		// Очищаємо масиви предметів і монстрів
		items.length = 0;
		monsters.length = 0;

		gameActive = true;
		playerMoved = false;
		victory = false;

		// Генеруємо предмети для збирання
		for (let i = 0; i < 5; i++) {
			items.push({
				x: Math.random() * (gameCanvas.width - playerSize),
				y: Math.random() * (gameCanvas.height - playerSize),
				color: getRandomColor()
			});
		}

		// Генеруємо монстрів
		for (let i = 0; i < 3; i++) {
			monsters.push({
				x: Math.random() * (gameCanvas.width - playerSize),
				y: Math.random() * (gameCanvas.height - playerSize),
				width: playerSize * 2,
				height: playerSize * 2,
				destroyed: false,
				speedX: 0,
				speedY: 0
			});
		}
	}

	function gameLoop () {
		if (!gameActive) return;

		ctx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
		movePlayer();
		if (playerMoved && !victory) {
			moveMonsters();
		} else if (victory) {
			moveMonstersRandomly();
		}
		drawPlayer();
		drawItems();
		drawMonsters();
		checkCollisions();
		requestAnimationFrame(gameLoop);
	}

	function movePlayer () {
		if (keys["ArrowUp"] && playerY > 0) playerY -= 2;
		if (keys["ArrowDown"] && playerY < gameCanvas.height - playerSize) playerY += 2;
		if (keys["ArrowLeft"] && playerX > 0) playerX -= 2;
		if (keys["ArrowRight"] && playerX < gameCanvas.width - playerSize) playerX += 2;
	}

	function moveMonsters () {
		monsters.forEach(monster => {
			const dx = playerX - monster.x;
			const dy = playerY - monster.y;
			const distance = Math.sqrt(dx * dx + dy * dy);
			const moveX = (dx / distance) * 1; // Швидкість монстрів по X
			const moveY = (dy / distance) * 1; // Швидкість монстрів по Y
			monster.x += moveX;
			monster.y += moveY;
		});
	}

	function moveMonstersRandomly () {
		monsters.forEach(monster => {
			monster.x += monster.speedX;
			monster.y += monster.speedY;
			// Перевірка виходу за межі canvas
			if (monster.x < 0 || monster.x > gameCanvas.width - monster.width ||
				monster.y < 0 || monster.y > gameCanvas.height - monster.height) {
				monster.speedX *= -1;
				monster.speedY *= -1;
			}
		});
	}

	function drawPlayer () {
		ctx.fillStyle = playerColor;
		ctx.fillRect(playerX, playerY, playerSize, playerSize);
	}

	function drawItems () {
		items.forEach(item => {
			ctx.fillStyle = item.color;
			ctx.fillRect(item.x, item.y, playerSize, playerSize);
		});
	}

	function drawMonsters () {
		ctx.fillStyle = "#f00";
		monsters.forEach(monster => {
			if (!monster.destroyed) {
				ctx.fillRect(monster.x, monster.y, monster.width, monster.height);
			}
		});
	}

	function checkCollisions () {
		items.forEach((item, index) => {
			if (playerX < item.x + playerSize && playerX + playerSize > item.x &&
				playerY < item.y + playerSize && playerY + playerSize > item.y) {
				playerColor = item.color;
				items.splice(index, 1);
				if (items.length === 0) {
					victory = true;
					monsters.forEach(monster => {
						const dx = monster.x - playerX;
						const dy = monster.y - playerY;
						const distance = Math.sqrt(dx * dx + dy * dy);
						monster.speedX = (dx / distance) * 3;
						monster.speedY = (dy / distance) * 3;
					});
					destroyMonstersWithEffect().then(() => showModal(true));
				}
			}
		});
		monsters.forEach(monster => {
			if (!victory && playerX < monster.x + monster.width && playerX + playerSize > monster.x &&
				playerY < monster.y + monster.height && playerY + playerSize > monster.y) {
				showModal(false);
			}
		});
	}

	function showModal (isVictory) {
		gameActive = false;
		modalMessage.textContent = isVictory ? "Ви виграли!" : "Гра завершена!";
		modal.style.display = "block";
		disableScroll();
	}

	function hideModal () {
		modal.style.display = "none";
		enableScroll();
	}

	function restartGame () {
		hideModal();
		startGame();
		playerX = 200;
		playerY = 200;
		gameActive = true;
		gameLoop();
	}

	function exitGame () {
		hideModal();
		gameArea.style.display = "none";
		startGameButton.style.display = "inline-block";
		endGameButton.style.display = "none";
		enableScroll();
	}

	async function destroyMonstersWithEffect () {
		for (let i = 0; i < monsters.length; i++) {
			const monster = monsters[i];
			monster.destroyed = true;
			await animateMonsterDestruction(monster);
		}
	}

	function animateMonsterDestruction (monster) {
		return new Promise((resolve) => {
			const explosionDuration = 500; // Тривалість вибуху в мілісекундах
			const explosionFrames = 10; // Кількість кадрів вибуху
			const explosionInterval = explosionDuration / explosionFrames;
			let currentFrame = 0;

			const fragments = 5;
			const fragmentSize = monster.width / fragments;
			const fragmentSpeed = 3;

			const explosionAnimation = setInterval(() => {
				ctx.clearRect(monster.x, monster.y, monster.width, monster.height);
				for (let i = 0; i < fragments; i++) {
					const angle = (Math.PI * 2 / fragments) * i;
					const fragmentX = monster.x + fragmentSpeed * currentFrame * Math.cos(angle);
					const fragmentY = monster.y + fragmentSpeed * currentFrame * Math.sin(angle);
					ctx.fillStyle = `rgba(255, 0, 0, ${1 - currentFrame / explosionFrames})`;
					ctx.fillRect(fragmentX, fragmentY, fragmentSize, fragmentSize);
				}
				currentFrame++;
				if (currentFrame > explosionFrames) {
					clearInterval(explosionAnimation);
					resolve();
				}
			}, explosionInterval);
		});
	}

	function getRandomColor () {
		const letters = "0123456789ABCDEF";
		let color = "#";
		for (let i = 0; i < 6; i++) {
			color += letters[Math.floor(Math.random() * 16)];
		}
		return color;
	}

	function disableScroll () {
		window.addEventListener("scroll", preventDefault, { passive: false });
		document.body.style.overflow = "hidden";
	}

	function enableScroll () {
		window.removeEventListener("scroll", preventDefault, { passive: false });
		document.body.style.overflow = "auto";
	}

	function preventDefault (e) {
		e.preventDefault();
	}

	function clearKeys () {
		for (let key in keys) {
			keys[key] = false;
		}
	}

	gameCanvas.addEventListener("mouseenter", disableScroll);
	gameCanvas.addEventListener("mouseleave", enableScroll);
</script>

</body>
</html>
